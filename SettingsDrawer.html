<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js"></script>
    <link rel="stylesheet" href="./css/SettingsDrawer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
    <title>Settings</title>
</head>

<body>
    <div id="setting-wrapper">
        <div class="setting-container">
            <div class="header">
                <div class="header-cover">
                    <img class="cover" src="./img/ironman.jpg" alt="" draggable="false">
                    <span class="behigh"></span>
                </div>
                <div class="header-box">
                    <div class="back-box">
                        <div class="back-button" role="button">
                            <i class="fas fa-arrow-left"></i>
                        </div>
                        <span class="title">
                            Settings
                        </span>
                    </div>
                </div>
                <div class="profile-content">
                    <div class="profile-box">
                        <img class="profile" src="./img/tony.jpg" alt="" draggable="false">
                        <span class="behigh"></span>
                        <label for="profile" class="brows-icon-box-desktop" role="button"></label>
                        <label for="profile" class="brows-icon-box" role="button">
                            <i class="fas fa-camera"></i>
                        </label>
                        <input type="file" id="profile" accept=".jpeg,.jpg,.png,.gif,.bmp,.ico,.svg" />
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="panel">
                    <div class="username-box">
                        <div class="username">
                            <div class="name">Tony Stark</div>
                        </div>
                        <div class="about">
                            I am Iron Man
                        </div>
                    </div>
                    <div class="control-content">
                        <div class="control-inside">
                            <div class="control-box" @click="floating(true)">
                                <div class="_title-box">
                                    <span>Name</span>
                                </div>
                                <div class="_control _edit-able">
                                    <div class="input-box">
                                        <div class="input" contenteditable="true">Tony Stark</div>
                                        <div class="ico-box">
                                            <i class="fas fa-pencil-alt" role="button"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="control-box">
                                <div class="_title-box">
                                    <span>About</span>
                                </div>
                                <div class="_control _edit-able">
                                    <div class="input-box">
                                        <div class="input" contenteditable="true">I am Iron Man</div>
                                        <div class="ico-box">
                                            <i class="fas fa-pencil-alt" role="button"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="signout-box">
                        <button class="btn-signout" role="button">Sign out</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="edit-panel" id="dismise" v-if="editPanel">
            <div class="dismise" @click="floating(false)"></div>
            <div class="edit-box">
                <div class="_title-box">
                    <span>Enter your name</span>
                </div>
                <div class="_control edit-able">
                    <div :class="['input-box', focused ? 'input-border' : '']">
                        <div class="input" ref="input" id="input" @focus="_focus" @blur="focused = false" contenteditable="true">Tony Stark</div>
                        <div class="ico-box">
                            <span>25</span>
                        </div>
                    </div>
                </div>
                <div class="submit-box">
                    <button role="button" @click="floating(false)">CANCEL</button>
                    <button role="button" @click="floating(false)">SAVE</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    new Vue({
        el: '#setting-wrapper',
        data() {
            return {
                editPanel: false,
                focused: false
            }
        },
        methods: {
            floating(e) {
                if (this.detectmob()) {
                    this.editPanel = e
                    if(e) this._focus()
                }else{
                    return
                }
            },
            _focus() {
                document.execCommand('selectAll',false,null)
                this.focused = true
                this.$nextTick(() => {
                    this.$refs.input.focus()
                });
            },
            detectmob() {
                if (navigator.userAgent.match(/Android/i) ||
                    navigator.userAgent.match(/webOS/i) ||
                    navigator.userAgent.match(/iPhone/i) ||
                    navigator.userAgent.match(/iPad/i) ||
                    navigator.userAgent.match(/iPod/i) ||
                    navigator.userAgent.match(/BlackBerry/i) ||
                    navigator.userAgent.match(/Windows Phone/i)
                ) {
                    return true;
                } else {
                    return false;
                }
            }
        },
    })
</script>